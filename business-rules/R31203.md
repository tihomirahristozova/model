---
erp.type: business-rule
erp.entity: Crm.Invoicing.Invoices
---

# R31203 Invoice - Deal Type Late Default
+-----------------------------+---------------------------------------------------------------------------------------+
| **Code**                    | 31203                                                                                 |
+-----------------------------+---------------------------------------------------------------------------------------+
| **Entity**                  | @Crm.Invoicing.Invoices                                                                               |
+-----------------------------+---------------------------------------------------------------------------------------+
| **Name**                    | DealTypeLateDefault                                                                   |
+-----------------------------+---------------------------------------------------------------------------------------+
| **Attribute**               | DealType                                                                              |
+-----------------------------+---------------------------------------------------------------------------------------+
| **Layer**                   | Back-End                                                                              |
+-----------------------------+---------------------------------------------------------------------------------------+
| **Events**                  | Commit                                                                                |
+-----------------------------+---------------------------------------------------------------------------------------+
| **Priority**                | Late                                                                                  |
+-----------------------------+---------------------------------------------------------------------------------------+
| **Modify**                  | YES                                                                                   |
+-----------------------------+---------------------------------------------------------------------------------------+
| **Applicable Legislations** | [ALL // no condition needed                                                           |
|                             | ](https://confluence.erp.net/display/techdoc/Country+Specific+Functionality)          |
+-----------------------------+---------------------------------------------------------------------------------------+
| **Action**                  | if (DealType == null && DocumentType != null && (!Lines.Any(l =\> l.LineDealType !=   |
|                             | null)) && DocumentType.InvoicesOptions.Any())                                         |
|                             | DealType =Â  DocumentType.InvoicesOptions.FirstOrDefault().DefaultDealType;            |
+-----------------------------+---------------------------------------------------------------------------------------+
| **Description**             | The rule sets the default value for the Deal Type field of the Invoces. The default   |
|                             | value is set only if the field does not have a value, there are no Invoice Lines or   |
|                             | Line Deal Type in all Invoice Lines are empty.                                        |
|                             |                                                                                       |
|                             | The Default Deal Type is specified in the Invoice Options of the document type.       |
+-----------------------------+---------------------------------------------------------------------------------------+
| **Message**                 | \-                                                                                    |
+-----------------------------+---------------------------------------------------------------------------------------+
| **Version**                 | Introduced: 20.1                                                                      |
+-----------------------------+---------------------------------------------------------------------------------------+
| **Revocable**               | NO                                                                                    |
+-----------------------------+---------------------------------------------------------------------------------------+

  

  

  
